<html lang="en">
  <head>
    <title>Solar Systems</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.1.0/modern-normalize.min.css" />
  </head>
  <body>
    <script src="js/three.js"></script>
    <script>
      class Planet {
        constructor(colour, size, daysInAYear, orbitDistance) {
          this.colour = colour;
          this.size = size;
          this.daysInAYear = daysInAYear;
          if (!this.colour) this.colour = new THREE.Color( Math.random()*0xffffff );
          if (!this.size) this.size = Math.random()*6;
          if (!this.daysInAYear) this.daysInAYear = 1;
          if (!this.orbitDistance) this.orbitDistance = -10 + Math.random()*-90;

          const geometry = new THREE.SphereGeometry( this.size );
          const material = new THREE.MeshLambertMaterial( { color: this.colour } );
          this.sphere = new THREE.Mesh( geometry, material );
          this.sphere.position.set( this.orbitDistance, 0, 0);
        }

        addToScene(scene) {
          scene.add(this.sphere);
        }

        travel() {
          this.sphere.rotation.z += this.daysInAYear*0.01;
        }
      }

			const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

      const renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      const sunLight = new THREE.PointLight( 0xffffff, 1, 0, 0 );
      sunLight.position.set( 0, 0, 0 );
      scene.add( sunLight );

      const ambientLight = new THREE.AmbientLight( 0xffffff, 0.3 );
      scene.add( ambientLight );

      camera.position.z = 100;

      const numPlanets = Math.random()*8 + 2;

      let planets = [];
      for (var i=0; i<numPlanets; i++) {
        let planet = new Planet();
        planet.addToScene(scene);
        planets.push(planet);
      }

      const geometry = new THREE.SphereGeometry( 8 );
      const material = new THREE.MeshBasicMaterial( { color: 0xffffcc } );
      let sun = new THREE.Mesh( geometry, material );
      sun.position.set( 0, 0, 0);
      scene.add(sun);

      function animate() {
        requestAnimationFrame( animate );
        planets.forEach(planet => {
          planet.travel();
        });
        renderer.render( scene, camera );
      }
      animate();

      window.addEventListener('resize', () => {
          renderer.setSize(window.innerWidth, window.innerHeight);
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
      });
		</script>
  </body>
</html>